{
  "name": "Create Leonard Clone with simple API call",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "c2cefd64-ac9b-435c-b669-ac5f66a0b0de",
      "name": "When clicking ‘Test workflow’"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.elevenlabs.io/v1/convai/agents/create",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "xi-api-key",
              "value": "sk_cf2f6abdf8d17c22e76236f81c5c1466ffb50831ea37eae4"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"agent_id\": \"tG9uM0Gz6OeuPuR8B123\",\n    \"name\": \"Auto Agent\",\n    \"conversation_config\": {\n        \"asr\": {\n            \"quality\": \"high\",\n            \"provider\": \"elevenlabs\",\n            \"user_input_audio_format\": \"pcm_16000\",\n            \"keywords\": []\n        },\n        \"turn\": {\n            \"turn_timeout\": 7.0,\n            \"silence_end_call_timeout\": 60.0,\n            \"mode\": \"turn\"\n        },\n        \"tts\": {\n            \"model_id\": \"eleven_flash_v2\",\n            \"voice_id\": \"AwP2bjcqrSky0yiDhZSe\",\n            \"agent_output_audio_format\": \"pcm_16000\",\n            \"optimize_streaming_latency\": 4,\n            \"stability\": 0.75,\n            \"speed\": 1.0,\n            \"similarity_boost\": 0.5,\n            \"pronunciation_dictionary_locators\": []\n        },\n        \"conversation\": {\n            \"max_duration_seconds\": 750,\n            \"client_events\": [\n                \"audio\",\n                \"interruption\",\n                \"user_transcript\",\n                \"agent_response\",\n                \"agent_response_correction\"\n            ]\n        },\n        \"language_presets\": {},\n        \"agent\": {\n            \"first_message\": \"Hi there {{user_name}}, I'm Leonard from Legal Engine. I'm going to show you how, by harnessing the power of voice and AI, I can help to take the pain out of creating matter descriptions that can be used for both directory submissions and other BD activities.\\n\\nOnce we've completed our conversation I'll send you a matter summary via email. If you're chatting with me on a mobile device you may need to ensure the device doesn't go into standby as it may interrupt our conversation.  \\n\\nIf we could start with you sharing, who the client was, a brief description of a matter and the main challenge or objective, I can then show you what I'm capable of. Over to you {{user_name}}…\",\n            \"language\": \"en\",\n            \"dynamic_variables\": {\n                \"dynamic_variable_placeholders\": {\n                    \"user_name\": \"Andy\"\n                }\n            },\n            \"prompt\": {\n                \"prompt\": \"# Directorease Sandbox Demo – Voice AI Interview Script\\n## METADATA\\n- Total Time: 4 minutes\\n- Purpose: Legal matter description information gathering\\n- Task: Your task is to use the structured questions to interview a senior lawyer to complete a matter description for a submission document to Legal 500 or Chambers\\n- Interview Type: Structured conversation with senior lawyer\\n- Version: Voice AI Optimized 1.0\\n- After each answer do not summarize or read back the answer\\n- Use language detection and switch questions to detected language\\n- Unless currency specified, use British Pounds/£. Example: '£1,000'\\n- If a number is stated as a currency use formatting. Example: '£1,000' or '$25,000\\n- If a date is quoted use format: day, month, year. Example: '24 February 2025'\\n## USER METADATA\\n# Configure these variables before starting the interview\\n## NAVIGATION GUIDELINES\\n- Each interaction is labelled with a unique ID (e.g. A1, B2, D3, E4)\\n- Use {NEXT} to proceed to the next question\\n- Use {BRANCH} for conditional paths\\n- Use {LOOP} for repeated sections\\n- Use {SKIP} for optional sections\\n- Use {RETURN} to go back to previous section if needed\\n- STARTING POINT: Begin the conversation at D1 (Matter Introduction)\\n## ERROR HANDLING\\n- If connection drops: Resume from last completed section ID\\n- If answer unclear: Repeat question once, then flag for human review\\n- If technical issues: Note section ID and switch to backup questions\\n\\n## MATTER REVIEW LOOP\\nD1. Matter Introduction\\nQuestion: \\\"I'm Leonard from Legal Engine. I'm going to show you how, by harnessing the power of voice and AI, I can help to take the pain out of creating matter descriptions that can be used for both directory submissions and other BD activities.\\n\\nOnce we've completed our conversation I'll send you a matter summary via email. If you're chatting with me on a mobile device you may need to ensure the device doesn't go into standby as it may interrupt our conversation.  \\n\\nIf we could start with you sharing, who the client was, a brief description of a matter and the main challenge or objective, I can then show you what I'm capable of.\\\"\\n{NEXT: D3}\\n\\nD3. Client Motivation\\n{Once the client is mentioned, invoke the 'save_client' tool with the client name and the user's details}\\nQuestion: \\\"Why did the client come to you for this matter, and, what was the outcome for the client?”\\n{NEXT: D6}\\n\\nD6. Business Impact \\nQuestion: \\\"What was the deal size or transaction value for this matter and were there any notable cost savings or revenue implications for the client?\\\" \\n{NEXT: D8}\\n\\nD8. Team Composition\\nQuestion: \\\"What role did you play, who were the other key team members and what were their roles. Also let me know which jurisdictions it involved.\\\"\\n{NEXT: D11}\\n\\nD11. Innovation and Regulatory Implications\\nQuestion: “Was there anything noteworthy about the matter? Perhaps something innovative, precedent-setting, that impacted regulations or ESG?\\\"\\n{NEXT: D14}\\n\\nD14. Matter Status\\nQuestion: \\\"What is the current status of this matter? If completed, when did it finish?\\\"\\n{NEXT: D15}\\n\\nD15. Recognition\\nQuestion: \\\"Was there any press coverage or awards related to this matter?\\\"\\n{NEXT: D17}\\n\\nD17. Matter Summary\\nStatement: \\\"Thank you for sharing those details. Let me summarise my understanding of this matter to ensure I've captured everything correctly:\\n[SUMMARIZE THE MATTER IN UK ENGLISH BASED ON THE INFORMATION GATHERED, INCLUDING:\\n- Client's\\n- Main challenge/objective\\n- Client's motivation for seeking help\\n- Outcome and business/client impact\\n- Deal size\\n- Team composition and roles\\n- Jurisdictions involved\\n- Any innovative approaches, precedent-setting notes, regulatory impacts or ESG \\n- Current status, if closed, make sure to quote the date in the summary in the format day, month, year. Example: 24 February 2025\\n- Any recognition or awards]\\nWould you like to make any corrections before I email you a copy?\\\"\\n{If there are corrections please clarify the corrections and update the summary before moving on. \\nNEXT: D18}\\n\\nD18. Holding pattern\\n{Now use the 'send_summary' tool to send the 'summary'.}\\nStatement: \\\"Great, I'm now processing your matter. Unlike your BD team, this will only take me a few seconds and then I can let you get back to more important stuff!\\\"\\n{Next: D19. Closing}\\n\\nD19. Closing\\nStatement: \\\"Thank you for chatting with me today, I've emailed over the summary of the matter we discussed and a few other tidbits that you may find of interest. Please take a look in your inbox and feel free to reach out to hear more about the work we are doing at Legal Engine.\\nThanks again, I hope to speak again soon\\\"\\n{END}\\n\\n## CALL TERMINATION INSTRUCTIONS\\n- If at any point the user indicates they are done providing information for all the matter (e.g., \\\"I need to go,\\\" etc.), thank them for their time and end the call.\\n- Do not persist with further questions if the user signals they want to conclude the conversation.\\n- Before ending, briefly acknowledge the information they've provided and confirm the next steps: \\\"Thank you for the information you've shared. Please feel free to reach out to hear more about the work we are doing at Legal Engine.\\\"\\n\\n## SPECIAL HANDLING NOTES\\n- If connection issues: Return to last completed section\\n- If time running short: Focus on completing as much of the matter as possible\\n- If technical terms needed: Use glossary provided\",\n\"llm\": \"gemini-2.0-flash-001\",\n                \"temperature\": 0.3,\n                \"max_tokens\": -1,\n                \"tools\": [\n                    {\n                        \"id\": \"EUv1berotGH2ACIu2O65\",\n                        \"type\": \"system\",\n                        \"name\": \"language_detection\",\n                        \"description\": \"\",\n                        \"params\": {\n                            \"system_tool_type\": \"language_detection\"\n                        }\n                    },\n                    {\n                        \"id\": \"zLmU2CTKXCq9MOzvaSLb\",\n                        \"type\": \"webhook\",\n                        \"name\": \"save_client\",\n                        \"description\": \"Use this tool to save the client name for a matter once it is known\",\n                        \"api_schema\": {\n                            \"url\": \"https://leonard-dev.app.n8n.cloud/webhook/testcrm\",\n                            \"method\": \"POST\",\n                            \"path_params_schema\": {},\n                            \"query_params_schema\": null,\n                            \"request_body_schema\": {\n                                \"type\": \"object\",\n                                \"properties\": {\n                                    \"client\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"Establish the client's name \",\n                                        \"dynamic_variable\": \"\",\n                                        \"constant_value\": \"\"\n                                    },\n                                    \"user_email\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"\",\n                                        \"dynamic_variable\": \"user_email\",\n                                        \"constant_value\": \"\"\n                                    },\n                                    \"user_name\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"\",\n                                        \"dynamic_variable\": \"user_name\",\n                                        \"constant_value\": \"\"\n                                    }\n                                },\n                                \"required\": [\n                                    \"client\",\n                                    \"user_email\",\n                                    \"user_name\"\n                                ],\n                                \"description\": \"Get the client name, first name and other personal details ready to save\"\n                            },\n                            \"request_headers\": {}\n                        },\n                        \"dynamic_variables\": {\n                            \"dynamic_variable_placeholders\": {\n                                \"user_email\": \"andy@legalengine.co.uk\",\n                                \"user_name\": \"Andy\"\n                            }\n                        }\n                    },\n                    {\n                        \"id\": \"lfbwRtpGj7SwzaH8LaQK\",\n                        \"type\": \"webhook\",\n                        \"name\": \"send_summary\",\n                        \"description\": \"Use this tool to send the user the summary of a matter once they approve that it is correct. \",\n                        \"api_schema\": {\n                            \"url\": \"https://leonard-dev.app.n8n.cloud/webhook/testdemo\",\n                            \"method\": \"POST\",\n                            \"path_params_schema\": {},\n                            \"query_params_schema\": null,\n                            \"request_body_schema\": {\n                                \"type\": \"object\",\n                                \"properties\": {\n                                    \"user_email\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"\",\n                                        \"dynamic_variable\": \"user_email\",\n                                        \"constant_value\": \"\"\n                                    },\n                                    \"summary\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"summary of matter description in UK English, not US English\",\n                                        \"dynamic_variable\": \"\",\n                                        \"constant_value\": \"\"\n                                    },\n                                    \"user_name\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"\",\n                                        \"dynamic_variable\": \"user_name\",\n                                        \"constant_value\": \"\"\n                                    },\n                                    \"transcript\": {\n                                        \"type\": \"string\",\n                                        \"description\": \"A full transcript of the user's conversation with the agent until this point, in UK English, not US English\",\n                                        \"dynamic_variable\": \"\",\n                                        \"constant_value\": \"\"\n                                    }\n                                },\n                                \"required\": [\n                                    \"user_email\",\n                                    \"summary\",\n                                    \"user_name\",\n                                    \"transcript\"\n                                ],\n                                \"description\": \"Ask the user if the matter summary that you gave them is correct, if okay to send, trigger this action.\"\n                            },\n                            \"request_headers\": {}\n                        },\n                        \"dynamic_variables\": {\n                            \"dynamic_variable_placeholders\": {\n                                \"user_email\": \"andy@legalengine.co.uk\",\n                                \"user_name\": \"Andy\"\n                            }\n                        }\n                    },\n                    {\n                        \"id\": \"fEL96Xn1nkQZ2J39JmtN\",\n                        \"type\": \"system\",\n                        \"name\": \"end_call\",\n                        \"description\": \"\",\n                        \"params\": {\n                            \"system_tool_type\": \"end_call\"\n                        }\n                    }\n                ],\n                \"tool_ids\": [\n                    \"EUv1berotGH2ACIu2O65\",\n                    \"zLmU2CTKXCq9MOzvaSLb\",\n                    \"lfbwRtpGj7SwzaH8LaQK\",\n                    \"fEL96Xn1nkQZ2J39JmtN\"\n                ],\n                \"knowledge_base\": [\n                    {\n                        \"type\": \"url\",\n                        \"name\": \"2025.03 facets 1 to 6 - laws - work types - sectors - participants - connectors - information assets - noslegal 3.0 - Microsoft.xlsx\",\n                        \"id\": \"ejv14Dbmoc3KyCyFO19K\",\n                        \"usage_mode\": \"auto\"\n                    },\n                    {\n                        \"type\": \"url\",\n                        \"name\": \"taxonomy/2025.03 v3 noslegal release/2025.03 guide - noslegal 3.0.pdf at main · noslegal/taxonomy\",\n                        \"id\": \"asdugn4RGhF5gvo638Mz\",\n                        \"usage_mode\": \"auto\"\n                    },\n                    {\n                        \"type\": \"url\",\n                        \"name\": \"GitHub - noslegal/taxonomy: noslegal taxonomy facets and release notes\",\n                        \"id\": \"WTSeALM0hCdp3JOAQkh7\",\n                        \"usage_mode\": \"auto\"\n                    },\n                    {\n                        \"type\": \"text\",\n                        \"name\": \"Legal500 Instructions\",\n                        \"id\": \"Y47AunKPNxeDkf6ZXHrA\",\n                        \"usage_mode\": \"auto\"\n                    }\n                ],\n                \"custom_llm\": null,\n                \"ignore_default_personality\": false,\n                \"rag\": {\n                    \"enabled\": true,\n                    \"embedding_model\": \"e5_mistral_7b_instruct\",\n                    \"max_vector_distance\": 0.6,\n                    \"max_documents_length\": 50000\n                }\n            }\n        }\n    },\n    \"metadata\": {\n        \"created_at_unix_secs\": 1745903685\n    },\n    \"platform_settings\": {\n        \"auth\": {\n            \"enable_auth\": false,\n            \"allowlist\": [],\n            \"shareable_token\": null\n        },\n        \"evaluation\": {\n            \"criteria\": []\n        },\n        \"widget\": {\n            \"variant\": \"full\",\n            \"expandable\": \"never\",\n            \"avatar\": {\n                \"type\": \"orb\",\n                \"color_1\": \"#2792DC\",\n                \"color_2\": \"#9CE6E6\"\n            },\n            \"feedback_mode\": \"during\",\n            \"bg_color\": \"#ffffff\",\n            \"text_color\": \"#000000\",\n            \"btn_color\": \"#000000\",\n            \"btn_text_color\": \"#ffffff\",\n            \"border_color\": \"#e1e1e1\",\n            \"focus_color\": \"#000000\",\n            \"border_radius\": null,\n            \"btn_radius\": null,\n            \"action_text\": null,\n            \"start_call_text\": null,\n            \"end_call_text\": null,\n            \"expand_text\": null,\n            \"listening_text\": null,\n            \"speaking_text\": null,\n            \"shareable_page_text\": null,\n            \"shareable_page_show_terms\": true,\n            \"terms_text\": \"#### Terms and conditions\\n\\nBy clicking \\\"Agree,\\\" and each time I interact with this AI agent, I consent to the recording, storage, and sharing of my communications with third-party service providers, and as described in the Privacy Policy.\\nIf you do not wish to have your conversations recorded, please refrain from using this service.\",\n            \"terms_html\": \"<h4>Terms and conditions</h4>\\n<p>By clicking &quot;Agree,&quot; and each time I interact with this AI agent, I consent to the recording, storage, and sharing of my communications with third-party service providers, and as described in the Privacy Policy.\\nIf you do not wish to have your conversations recorded, please refrain from using this service.</p>\\n\",\n            \"terms_key\": null,\n            \"show_avatar_when_collapsed\": true,\n            \"disable_banner\": false,\n            \"mic_muting_enabled\": false,\n            \"language_selector\": false,\n            \"custom_avatar_path\": null\n        },\n        \"data_collection\": {},\n        \"overrides\": {\n            \"conversation_config_override\": {\n                \"agent\": {\n                    \"prompt\": {\n                        \"prompt\": false\n                    },\n                    \"first_message\": false,\n                    \"language\": true\n                },\n                \"tts\": {\n                    \"voice_id\": false\n                }\n            },\n            \"custom_llm_extra_body\": false,\n            \"enable_conversation_initiation_client_data_from_webhook\": false\n        },\n        \"call_limits\": {\n            \"agent_concurrency_limit\": -1,\n            \"daily_limit\": 100000\n        },\n        \"ban\": null,\n        \"privacy\": {\n            \"record_voice\": true,\n            \"retention_days\": 730,\n            \"delete_transcript_and_pii\": true,\n            \"delete_audio\": true,\n            \"apply_to_existing_conversations\": false\n        },\n        \"workspace_overrides\": {\n            \"conversation_initiation_client_data_webhook\": null,\n            \"webhooks\": {\n                \"post_call_webhook_id\": null\n            }\n        },\n        \"safety\": {\n            \"is_blocked_ivc\": false,\n            \"is_blocked_non_ivc\": false,\n            \"ignore_safety_evaluation\": false\n        }\n    },\n    \"phone_numbers\": [],\n    \"access_info\": {\n        \"is_creator\": true,\n        \"creator_name\": \"Leonard\",\n        \"creator_email\": \"leonard@legalengine.co.uk\",\n        \"role\": \"admin\"\n    },\n    \"categories\": []\n}\n\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        220,
        0
      ],
      "id": "a78524f2-04cf-48a2-ba05-7f480b8833da",
      "name": "Create Agent"
    }
  ],
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Create Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "pinData": {},
  "triggerCount": 0,
  "meta": null
}